<!DOCTYPE html><html lang="de"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Interop · Reason</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## JavaScript einfach mitten in deinen Reason-Code einstreuen"/><meta name="docsearch:language" content="de"/><meta property="og:title" content="Interop · Reason"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reasonml.github.io/"/><meta property="og:description" content="## JavaScript einfach mitten in deinen Reason-Code einstreuen"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/icon_50.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><link rel="alternate" type="application/atom+xml" href="https://reasonml.github.io/blog/atom.xml" title="Reason Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://reasonml.github.io/blog/feed.xml" title="Reason Blog RSS Feed"/><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/de"><img class="logo" src="/img/dummy.svg" alt="Reason"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/de/what-and-why" target="_self">Docs</a></li><li class=""><a href="/de/try" target="_self">Try</a></li><li class=""><a href="/api/index" target="_self">API</a></li><li class=""><a href="/docs/de/community" target="_self">Community</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Deutsch</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ja/interop">日本語</a></li><li><a href="/docs/en/interop">English</a></li><li><a href="/docs/es-ES/interop">Español</a></li><li><a href="/docs/fr/interop">Français</a></li><li><a href="/docs/ko/interop">한국어</a></li><li><a href="/docs/pt-BR/interop">Português (Brasil)</a></li><li><a href="/docs/ru/interop">Русский</a></li><li><a href="/docs/uk/interop">Українська</a></li><li><a href="/docs/zh-CN/interop">中文</a></li><li><a href="/docs/zh-TW/interop">繁體中文</a></li><li><a href="https://crowdin.com/project/reason" target="_blank" rel="noreferrer noopener">Beim Übersetzen helfen</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/reason" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>JavaScript</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Intro</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/what-and-why">What &amp; Why</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Setup</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/de/editor-plugins">Editor Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/de/extra-goodies">Extra Goodies</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Language Basics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/de/let-binding">Let Binding</a></li><li class="navListItem"><a class="navItem" href="/docs/de/type">Type!</a></li><li class="navListItem"><a class="navItem" href="/docs/de/string-and-char">String &amp; Char</a></li><li class="navListItem"><a class="navItem" href="/docs/de/boolean">Boolean</a></li><li class="navListItem"><a class="navItem" href="/docs/de/integer-and-float">Integer &amp; Float</a></li><li class="navListItem"><a class="navItem" href="/docs/de/tuple">Tuple</a></li><li class="navListItem"><a class="navItem" href="/docs/de/record">Record</a></li><li class="navListItem"><a class="navItem" href="/docs/de/variant">Variant!</a></li><li class="navListItem"><a class="navItem" href="/docs/de/null-undefined-option">Null, Undefined &amp; Option</a></li><li class="navListItem"><a class="navItem" href="/docs/de/list-and-array">List &amp; Array</a></li><li class="navListItem"><a class="navItem" href="/docs/de/function">Function</a></li><li class="navListItem"><a class="navItem" href="/docs/de/if-else">If-Else</a></li><li class="navListItem"><a class="navItem" href="/docs/de/pipe-first">Pipe First</a></li><li class="navListItem"><a class="navItem" href="/docs/de/more-on-type">More on Type</a></li><li class="navListItem"><a class="navItem" href="/docs/de/destructuring">Destructuring</a></li><li class="navListItem"><a class="navItem" href="/docs/de/pattern-matching">Pattern Matching!</a></li><li class="navListItem"><a class="navItem" href="/docs/de/mutation">Mutation</a></li><li class="navListItem"><a class="navItem" href="/docs/de/imperative-loops">Imperative Loops</a></li><li class="navListItem"><a class="navItem" href="/docs/de/jsx">JSX</a></li><li class="navListItem"><a class="navItem" href="/docs/de/external">External</a></li><li class="navListItem"><a class="navItem" href="/docs/de/exception">Exception</a></li><li class="navListItem"><a class="navItem" href="/docs/de/object">Object</a></li><li class="navListItem"><a class="navItem" href="/docs/de/module">Module</a></li><li class="navListItem"><a class="navItem" href="/docs/de/promise">Promise</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">JavaScript</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/de/interop">Interop</a></li><li class="navListItem"><a class="navItem" href="/docs/de/syntax-cheatsheet">Syntax Cheatsheet</a></li><li class="navListItem"><a class="navItem" href="/docs/de/libraries">Libraries</a></li><li class="navListItem"><a class="navItem" href="/docs/de/converting-from-js">Converting from JS</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Native</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/native">Native</a></li><li class="navListItem"><a class="navItem" href="/docs/de/quickstart-ocaml">Native Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/de/convert-from-ocaml">Converting from OCaml</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Extra</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/de/faq">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/docs/de/comparison-to-ocaml">Comparison to OCaml</a></li><li class="navListItem"><a class="navItem" href="/docs/de/newcomer-examples">Newcomer Examples</a></li><li class="navListItem"><a class="navItem" href="/docs/de/project-structure">Project Structure</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/reason/de" target="_blank" rel="noreferrer noopener">Translate</a><h1 class="postHeaderTitle">Interop</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="javascript-einfach-mitten-in-deinen-reason-code-einstreuen"></a><a href="#javascript-einfach-mitten-in-deinen-reason-code-einstreuen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript einfach mitten in deinen Reason-Code einstreuen</h2>
<p>If you're just hacking things together, this can be very nice, but you also have all of the unsafety of JavaScript code</p>
<pre><code class="hljs css language-reason">Js.log(&quot;this is reason&quot;);

[%bs.raw {| console.log('here is some javascript for you') |}];
</code></pre>
<blockquote>
<p><code>{|</code> und <code>|}</code> sind die Trennzeichen in einem mehrzeiligen String in OCaml. Du kannst dort auch einen Tag einfügen, z. B. <code>{something|</code> und dann wird nach einem passenden <code>|something}</code> zum Schließen gesucht.</p>
</blockquote>
<p>Und hier ist das resultierende JavaScript:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Generated by BUCKLESCRIPT VERSION 1.7.4, PLEASE EDIT WITH CARE</span>
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"this is reason"</span>);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'here is some javascript for you'</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="etwas-javascript-einstreuen-und-es-von-reason-zuganglich-machen"></a><a href="#etwas-javascript-einstreuen-und-es-von-reason-zuganglich-machen" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Etwas JavaScript einstreuen und es von Reason zugänglich machen</h2>
<p>Was ist, wenn du einen Wert haben möchtest, der aus deinem Reason-Code verwendet werden kann?</p>
<pre><code class="hljs css language-reason">Js.log(&quot;this is reason&quot;);
let x = [%bs.raw {| 'here is a string from javascript' |}];
Js.log(x ++ &quot; back in reason land&quot;); /* ++ ist der Operator für String-Konkatenation */
</code></pre>
<p>Jetzt fragst du dich vielleicht: „Was ist das für eine Magie?? Wie konnte OCaml wissen, dass <code>x</code> ein String war?“ <strong>Konnte es nicht</strong>. Der Typ von <code>x</code> in diesem Code ist ein magischer Typ, der sich mit beliebigem vereinheitlichen wird! Dies ist ziemlich gefährlich und kann kaskadierende Effekte in OCamls Typ-Inferenz-Algorithmus haben.</p>
<pre><code class="hljs css language-reason">let y = [%bs.raw {| 'something' |}];
Js.log((&quot;a string&quot; ++ y, 10 + y));
/* Gefahr!! OCaml wird dich nicht daran hindern, y als 2 total verschiedene Typen zu verwenden */
</code></pre>
<p>Um dies zu beheben, solltest du <strong>immer</strong> einen konkreten Typ für das Ergebnis von <code>bs.raw</code> angeben.</p>
<pre><code class="hljs css language-reason">let x: string = [%bs.raw {| 'well-typed' |}];
Js.log(x ++ &quot; back in reason land&quot;);
/* OCaml wird mit einem Fehler aussteigen, wenn du x als etwas anderes als ein String verwendest */
</code></pre>
<p>Und hier ist die Ausgabe!</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Generated by BUCKLESCRIPT VERSION 1.7.4, PLEASE EDIT WITH CARE</span>
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"this is reason"</span>);
<span class="hljs-keyword">var</span> x = ( <span class="hljs-string">'here is a string from javascript'</span> );
<span class="hljs-built_in">console</span>.log(x + <span class="hljs-string">" back in reason land"</span>);
<span class="hljs-keyword">var</span> y = ( <span class="hljs-string">'something'</span> );
<span class="hljs-built_in">console</span>.log(<span class="hljs-comment">/* tuple */</span>[
      <span class="hljs-string">"a string"</span> + y,
      <span class="hljs-number">10</span> + y | <span class="hljs-number">0</span>
    ]);
<span class="hljs-keyword">var</span> x$<span class="hljs-number">1</span> = ( <span class="hljs-string">'well-typed'</span> );
<span class="hljs-built_in">console</span>.log(x$<span class="hljs-number">1</span> + <span class="hljs-string">" back in reason land"</span>);
</code></pre>
<blockquote>
<p>Der Unterschied zwischen den 2 <code>%%</code> aus dem vorherigen Abschnitt und dem 1 <code>%</code> hier ist wichtig! <code>[%%something ...]</code> ist ein OCaml-„Erweiterungspunkt“ der eine Anweisung <em>auf oberster Ebene</em> repräsentiert (sie kann z. B. nicht in einer Funktion oder einem Wert vorkommen). <code>[%something ...]</code> ist ein Erweiterungspunkt, der für einen <em>Ausdruck</em> steht, und dieser kann fast überall eingesetzt werden -- aber stelle sicher, dass das JavaScript, das du einfügst, tatsächlich ein Ausdruck ist! Setze nach diesem z. B. kein Semikolon ein, ansonsten erhältst du einen Syntaxfehler, wenn du versuchst, das resultierende JavaScript auszuführen.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="eine-funktion-einfugen-werte-ubergeben"></a><a href="#eine-funktion-einfugen-werte-ubergeben" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Eine Funktion einfügen &amp; Werte übergeben</h2>
<p>Damit dies funktioniert, benötigen wir ein wenig Wissen, wie BuckleScript verschiedene Werte zur Laufzeit repräsentiert.</p>
<ul>
<li><code>strings</code> sind Strings, <code>ints</code> und <code>floats</code> sind einfach nur vom Typ number</li>
<li>ein <a href="/docs/de/list-and-array#array">Array</a> ist in OCaml eine mutierbare Liste fester Größe und wird als ein einfaches JavaScript-Array repräsentiert.</li>
<li>eine <a href="/docs/de/list-and-array#list">Liste</a> ist eine unveränderliche (<em>immutable</em>) verkettete Liste funktionalen Stils und stellt definitiv die idiomatischere Verwendung in den meisten Fällen dar. Allerdings ist ihre Darstellung komplizierter (versuche es einmal mit <code>Js.log([1,2,3,4])</code>). Deshalb konvertiere ich von &amp; zu <code>Array</code>s wenn ich mit JavaScript spreche, mithilfe von <code>Array.of_list</code> und <code>Array.to_list</code>.</li>
<li>Wenn du tiefer gehen möchtest, dann ist hier einer Liste <a href="https://bucklescript.github.io/docs/en/common-data-types.html#cheat-sheet">in der Dokumentation zu BuckleScript</a></li>
</ul>
<p>Wenn wir das wissen, können wir eine Funktion in JavaScript schreiben, die ohne viel Mühe einfach ein Array akzeptiert und eine Zahl zurückgibt.</p>
<pre><code class="hljs css language-reason">let jsCalculate: (array(int), int) =&gt; int = [%bs.raw
  {|
 function (numbers, scaleFactor) {
   var result = 0;
   numbers.forEach(number =&gt; {
     result += number;
   });
   return result * scaleFactor;
 }
|}
];

let calculate = (numbers, scaleFactor) =&gt; jsCalculate(Array.of_list(numbers), scaleFactor);

Js.log(calculate([1, 2, 3], 10)); /* -&gt; 60 */
</code></pre>
<p>Natürlich kann diese Funktion, die ich in JavaScript geschrieben habe, ohne großen Aufwand nach Reason portiert werden.</p>
<p><strong>Denke daran,</strong> dass dies eine Notlösung ist, die sehr nützlich zum Lernen ist, damit du schnell beginnen und etwas machen kannst, aber es ist eine gute Übung, wieder durch den Code zu gehen und diesen in feinen, sicheren Reason-Code umzuwandeln.</p>
<p>I've run into more than a few bugs because of raw JavaScript that I added to save time</p>
<h2><a class="anchor" aria-hidden="true" id="sich-eingewohnen-und-diszipliniert-werden"></a><a href="#sich-eingewohnen-und-diszipliniert-werden" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sich eingewöhnen und diszipliniert werden</h2>
<p>Bisher haben wir <code>bs.raw</code> verwendet, was eine sehr schnelle und lockere Weise ist, und <strong>nicht</strong> für die Produktion geeignet ist.</p>
<p>Aber was, wenn wir tatsächlich eine Funktion aufrufen müssen, die in JavaScript ist? Dies ist für die Interaktion mit dem DOM oder die Verwendung von Node. js-Modulen erforderlich. In BuckleScript kannst du eine <code>external</code>-Deklaration (<a href="https://bucklescript.github.io/docs/en/intro-to-external.html">docs</a>) verwenden.</p>
<p>Sowohl einen Wert als auch eine Funktion zu erhalten, ist ziemlich einfach:</p>
<pre><code class="hljs css language-reason">[@bs.val] external pi : float = &quot;Math.PI&quot;;
let tau = pi *. 2.0;
[@bs.val] external alert : string =&gt; unit = &quot;alert&quot;;
alert(&quot;hello&quot;);
</code></pre>
<p>Aber was ist, wenn wir etwas komplizierteres wollen? So könnten wir <code>getContext</code> auf einem Canvas-DOM-Knoten aufrufen:</p>
<pre><code class="hljs css language-reason">type canvas;

type context;

/* we're leaving these types abstract, because we won't
 * be using them directly anywhere */
[@bs.send] external getContext : (canvas, string) =&gt; context = &quot;getContext&quot;;

let myCanvas: canvas = [%bs.raw {| document.getElementById(&quot;mycanvas&quot;) |}];

let ctx = getContext(myCanvas, &quot;2d&quot;);
</code></pre>
<p>Entschlüsseln wir, was hier vor sich geht. Wir haben einige abstrakte Typen für den Canvas-DOM-Knoten und das zugehörige RenderingContext-Objekt erstellt.</p>
<p>Denn erstellten wir eine <code>getContext</code>-Funktion, aber anstatt <code>@bs.val</code> haben wir <code>@bs.send</code> verwendet, und wir setzten einen leeren String für den Text bei external ein. <code>@bs.send</code> bedeutet „wir rufen eine Methode für das erste Argument auf“, was in diesem Fall das Canvas-Objekt ist. In Anbetracht des oben Gesagten übersetzt BuckleScript <code>getContext(theFirstArgument, theSecondArgument)</code> in <code>theFirstArgument.getContext (theSecondArgument, ...)</code>.</p>
<p>Der leere String bedeutet „dieser JS-Name ist der gleiche wie der Name, den wir dem external im BuckleScript-Land geben“ – in diesem Fall <code>getContext</code>. Wenn wir ihn anders benennen möchten (wie <code>getRenderingContext</code>), müssten wir den String <code>&quot;getContext&quot;</code> angeben, damit BuckleScript die richtige Funktion aufruft.</p>
<p>Lass uns eine weitere Funktion hinzufügen, nur damit es interessant ist.</p>
<pre><code class="hljs css language-reason">[@bs.send] external fillRect : (context, float, float, float, float) =&gt; unit = &quot;fillRect&quot;;
</code></pre>
<p>Und jetzt können wir etwas malen!</p>
<pre><code class="hljs css language-reason">fillRect(ctx, 0.0, 0.0, 100.0, 100.0);
</code></pre>
<p>Es ist nicht viel, aber das Hinzufügen anderer Canvas-Methoden ist ähnlich, und dann kannst du einige <a href="https://twitter.com/jaredforsyth/status/871062358076030976">wirklich lustige Dinge</a> machen.</p>
<p>Wie sieht nun das kompilierte JavaScript aus?</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;
<span class="hljs-keyword">var</span> tau = <span class="hljs-built_in">Math</span>.PI * <span class="hljs-number">2.0</span>;
alert(<span class="hljs-string">"hello"</span>);
<span class="hljs-keyword">var</span> myCanvas = ( <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"mycanvas"</span>) );
<span class="hljs-keyword">var</span> ctx = myCanvas.getContext(<span class="hljs-string">"2d"</span>);
ctx.fillRect(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>);
</code></pre>
<p>Wow! Hast du bemerkt, wie BuckleScript unsere <code>pi</code>-Variable automatisch im Code aufgelöst hat? Und die Ausgabe sieht fast genauso aus wie von Hand geschrieben.</p>
<h2><a class="anchor" aria-hidden="true" id="vorhandene-javascript-bibliotheken-verwenden"></a><a href="#vorhandene-javascript-bibliotheken-verwenden" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vorhandene JavaScript-Bibliotheken verwenden</h2>
<p>Wenn Benutzer Wrapper für eine bestimmte JavaScript-Bibliothek schreiben, veröffentlichen sie diese normalerweise in npm. Gehe zu <a href="/docs/de/libraries">Bibliotheken</a>, um herauszufinden, wie du diese finden kannst.</p>
<p>Um eine Bibliothek ohne vorhandene Wrapper zu verwenden, musst du das npm-Paket jedoch wie gewöhnlich installieren, z. B. verwende <code>npm install --save &lt;paketname&gt;</code>, und dann schreib einfach deinen Wrapper. Du wirst wahrscheinlich die <a href="https://bucklescript.github.io/docs/en/import-export.html#import"><code>bs.module</code></a>-FFI-Funktion besonders nützlich finden. Je nach Modulformat des JS-Kompilierungsziels gibt es die richtigen <code>import</code>s oder <code>require</code>s aus.</p>
<p>Als Beispiel hier ist der gesamte Quellcode des <a href="https://github.com/reasonml-community/sb-glob"><code>bs.glob</code></a>-Wrappers (konvertiert zu Reason, das Original ist OCaml):</p>
<pre><code class="hljs css language-reason">type error;

[@bs.module] external glob : (string, (Js.nullable(error), array(string)) =&gt; unit) =&gt; unit = &quot;glob&quot;;

[@bs.val] [@bs.module &quot;glob&quot;] external sync : string =&gt; array(string) = &quot;glob&quot;;
</code></pre>
<p>Und die relevanten Teil aus <code>package.json</code>:</p>
<pre><code class="hljs css language-json">{
  "name": "bs-glob",
  "version": "0.1.0",
  ...
  "devDependencies": {
    "bs-platform": "^1.9.1"
  },
  "dependencies": {
    "glob": "^7.1.2"
  }
}
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/de/promise"><span class="arrow-prev">← </span><span>Promise</span></a><a class="docs-next button" href="/docs/de/syntax-cheatsheet"><span>Syntax Cheatsheet</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#javascript-einfach-mitten-in-deinen-reason-code-einstreuen">JavaScript einfach mitten in deinen Reason-Code einstreuen</a></li><li><a href="#etwas-javascript-einstreuen-und-es-von-reason-zuganglich-machen">Etwas JavaScript einstreuen und es von Reason zugänglich machen</a></li><li><a href="#eine-funktion-einfugen-amp-werte-ubergeben">Eine Funktion einfügen &amp; Werte übergeben</a></li><li><a href="#sich-eingewohnen-und-diszipliniert-werden">Sich eingewöhnen und diszipliniert werden</a></li><li><a href="#vorhandene-javascript-bibliotheken-verwenden">Vorhandene JavaScript-Bibliotheken verwenden</a></li></ul></nav></div><span><script src="/js/redirectBlog.js"></script><script src="/js/pjax-api.min.js"></script><script>window.foo = new Pjax({
          areas: [
            // try to use the first query.
            '.mainContainer, .docsNavContainer .toc .navWrapper, .onPageNav',
            // fallback
            'body'
          ],
          link: '.docsNavContainer:not(.docsSliderActive) a',
          update: {
            script: false,
          }
        });
        var languagesMenuItemCopy = document.getElementById("languages-menu");
        languagesMenuItemCopy.addEventListener("click", function(e){
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        });</script></span></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '966d1e412f67114a07dc0afe44b19b53',
                indexName: 'reason',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["lang:de"]}
              });
            </script></body></html>